## garbage collection

- 자바스크립트는 'reachability(도달 가능성)'이라는 개념을 사용해 메모리 관리를 수행한다. 어떻게든 접근하거나 사용할 수 있는 'reachable(도달 가능한)' 값은 메모리에서 삭제되지 않는다.

- 'root(루트)'라고 불리는 값들은 태생부터 도달 가능한 값들이다. 명백한 이유없이 삭제되지 않는다. root 값에는 '현재 함수의 지역 변수와 매개변수', '중첩 함수의 체인에 있는 함수에서 사용되는 변수와 매개변수', '전역 변수' 등이 해당된다.

- root가 참조하는 값이나 체이닝으로 root에서 참조할 수 있는 값은 도달 가능한 값이 된다. 전역 변수에 객체가 저장되어있고 해당 객체의 프로퍼티 값이 다른 객체를 참조하고 있다면, 프로퍼티가 참조하고 있는 객체와 이 객체가 참조하고 있는 모든 값들은 reachable한 값이 된다.

- 자바스크립트 엔진 내에서는 garbage collector가 끊임없이 동작한다. garbage collector는 모든 객체를 모니터링하고, 도달할 수 없는 객체는 삭제한다.

- 외부로 나가는 참조는 reachable 상태에 영향을 주지 않는다. 외부에서 들어오는 참조만이 reachable 상태에 영향을 준다.

- 다수의 객체가 서로를 참조하고 있더라도 그 중 하나도 root에서 참조하고 있지 않다면 해당 객체들은 도달할 수 없는 섬과 같이 되어 도달 가능성이 사라진다. 해당 객체 전부는 메모리에서 삭제되게 된다.

- garbage collector는 다음의 절차로 garbage collection을 수행한다.root의 정보를 수집하고 이를 mark(기억)한다. > root가 참조하고 있는 모든 객체를 방문하고 이를 mark한다. > mark한 모든 객체에 방문하고 그 객체들이 참조하는 객체도 mark한다. > 루트에서 도달 가능한 모든 객체를 방문할 때까지 과정을 반복한다. 이때, 한번 방문한 객체는 전부 mark하기 때문에 같은 객체를 다시 방문하지 않는다. > mark되지 않은 모든 객체를 메모리에서 삭제한다. 이러한 알고리즘을 'mark-and-sweep'이라고 부른다.

- 자바스크립트 엔진은 실행에 영향을 미치지 않으면서 가비지 컬렉션을 더 빠르게 하는 다양한 최적화 기법을 적용한다. 

- generational collection(세대별 수집)이라는 기법은 객체를 '새로운 객체'와 '오래된 객체'로 나눈다. 객체 상당수는 생성 이후 제 역할을 빠르게 수행하고 금방 쓸모가 없어지는데 이러한 객체를 '새로운 객체'로 구분하고 가비지 컬렉터가 공격적으로 메모리에서 제거한다. 일정 시간 이상 동안 살아남을 객체는 '오래된 객체'로 분류하고 덜 감시한다.

- incremental collection(점진적 수집)이라는 기법은 가비지 컬렉션을 여러 부분으로 분리하여 각 부분을 별도루 수행한다. 작업을 분리하고, 변경사항을 추적하는 추가작업이 필요하지만, 긴 지열을 짧은 지연 여러 개로 분산시킬 수 있다는 장점이 있다.

- idle-time collection(유휴 시간 수집)이라는 기법은 garbage collection이 프로그램의 실행에 주는 영향을 최소화하기 위해 CPU가 유휴 상태일 때에만 가비지 컬렉션을 실행한다.

### 참조
---

- [모던 JavaScript 튜토리얼 - 4.3 가비지 컬렉션](https://ko.javascript.info/garbage-collection)